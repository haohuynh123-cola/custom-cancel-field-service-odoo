<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <record id="view_task_form_inherit_cancel" model="ir.ui.view">
        <field name="name">project.task.form.inherit.cancel</field>
        <field name="model">project.task</field>
        <field name="inherit_id" ref="project.view_task_form2" />
        <field name="arch" type="xml">
            <xpath expr="//header/field[@name='stage_id']" position="attributes">
                <attribute name="invisible">1</attribute>
                <attribute name="readonly">1</attribute>
            </xpath>
            <xpath expr="//header/field[@name='state']" position="replace">
                <field name="state" widget="statusbar" options="{'clickable': '0'}" statusbar_visible="open,assigned,in_progress,review,rejected,canceled" readonly="1" force_save="1"/>
            </xpath>

            <xpath expr="//header" position="inside">
                <button name="action_assign" string="Assign" type="object" class="btn btn-primary" invisible="state != 'open'"/>
                <button name="action_start" string="Start" type="object" class="btn btn-primary" invisible="state != 'assigned'"/>
                <button name="action_review" string="Finish" type="object" class="btn btn-success" invisible="state != 'in_progress'"/>
                <button name="action_open_reject_wizard" string="Reject" type="object" class="btn btn-warning" invisible="state != 'review'"/>
                <button name="action_reopen" string="Re-open" type="object" class="btn btn-success" invisible="state not in ['rejected', 'canceled']"/>
                <button name="action_open_cancel_wizard" string="Cancel" type="object" class="btn btn-danger" invisible="state in ['rejected', 'canceled']"/>
            </xpath>

            <xpath expr="//notebook" position="inside">
                <page string="Reason Information">
                    <group>
                        <field name="cancel_reason" invisible="not cancel_reason"/>
                        <field name="reject_reason" invisible="not reject_reason"/>
                    </group>
                </page>
            </xpath>
        </field>
    </record>
</odoo>